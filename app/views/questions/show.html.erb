<h1><%= @question.title %></h1>
<p><%= @question.body %><p>
<p>Created On: <%= standard_date_format(@question.created_at) %></p>


<p><strong>Subject: </strong><%= @question.subject.name if @question.subject %></p>
<!-- <p><strong>Subject: </strong><%= @question.subject&.name %></p> -->

<%# like = @question.likes.find_by(user: current_user) %>
<!-- do not need the above line since we have the method "like_for" in question.rb -->
<% if user_signed_in? && (can? :like, @question)%>
  <%# if !like.present? %>
  <% if !@question.liked_by?(current_user) %>
    <%= link_to fa_icon("heart-o"), question_likes_path(@question), method: :post%>
  <% else %>
    <%# link_to "Unlike", question_like_path(@question, like), method: :delete%>
    <%= link_to fa_icon("heart"), question_like_path(@question, @question.like_for(current_user)), method: :delete%>
  <% end %>
<% end %>

<span><%= pluralize(@question.likes.count, 'like') %></span>




<% if can? :edit, @question%>
  <%= link_to 'Edit', edit_question_path(@question) %>
<% end %>
<%# Rails enables us to make links end non-GET requests by setting the `method`
    attribute for `link_to`. Rails uses Javascript to accomplish that. %>
<% if can? :destroy, @question%>
  <%= link_to 'Delete', question_path(@question), method: :delete, data:{confirm: 'Are you sure?'} %>
<% end %>


<h2>Answers</h2>
<%# question/:question_id/answers %>
<%= @answer.errors.full_messages.join(', ') %>
<%= form_for [@question, @answer] do |f| %>
  <%= f.text_area :body %>
  <%= f.submit %>
<% end %>

<hr>
<% @question.answers.each do |answer| %>
  <p><%= answer.body %></p>
  <%= link_to 'Delete Answer', question_answer_path(@question, answer), method: :delete, data:{confirm: "Are your sure?"} %>
  <hr>
<% end %>
